<!DOCTYPE html>
<html lang="zh-cn">

<head>
	<meta charset="UTF-8">
	<title>IP Worker 说明页</title>
	<style>
		body {
			font-family: sans-serif;
			margin: 2em;
		}

		code {
			background: #f4f4f4;
			padding: 2px 4px;
			border-radius: 3px;
		}

		pre {
			background: #f4f4f4;
			padding: 1em;
			border-radius: 5px;
		}
	</style>
</head>

<body>
	<h1>IP Worker 说明页</h1>
	<p>本服务用于获取访问者的 IP 及相关地理信息。</p>
	<h2>接口用法</h2>
	<p>支持多种返回格式，通过 <code>?format=</code> 参数指定：</p>
	<ul>
		<li><code>json</code>：返回 JSON 格式</li>
		<li><code>xml</code>：返回 XML 格式</li>
		<li><code>jsonp</code>：返回 JSONP 格式，需额外提供 <code>callback</code> 参数</li>
		<li><code>text</code> 或无参数：仅返回 IP 字符串</li>
	</ul>
	<h3>示例</h3>
	<ul>
		<li>JSON: <code>/&#63;format=json</code></li>
		<li>XML: <code>/&#63;format=xml</code></li>
		<li>JSONP: <code>/&#63;format=jsonp&amp;callback=foo</code></li>
		<li>纯文本: <code>/</code> 或 <code>/&#63;format=text</code></li>
	</ul>
	<h2>返回字段说明</h2>
	<pre>
{
  "ip": "用户IP",
  "asn": "自治系统编号",
  "colo": "Cloudflare节点",
  "continent": "大洲代码",
  "country": "国家代码",
  "city": "城市",
  "isEUCountry": "是否欧盟国家",
  "asOrganization": "运营商",
  "longitude": "经度",
  "latitude": "纬度",
  "postalCode": "邮编",
  "region": "地区",
  "regionCode": "地区代码",
  "timezone": "时区"
}
  </pre>
	<h2>实际请求示例</h2>
	<pre id="json-demo">加载中...</pre>
	<script>
		fetch('/?format=json')
			.then(r => r.json())
			.then(data => {
				document.getElementById('json-demo').textContent = JSON.stringify(data, null, 2)
			})
			.catch(() => {
				document.getElementById('json-demo').textContent = '获取失败'
			})
	</script>
	<footer>
		<p>Powered by Cloudflare Workers</p>
	</footer>
</body>

</html>
